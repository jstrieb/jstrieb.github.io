<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="author" content="Jacob Strieb" />
  <meta name="date" content="2020-12-02" />
  <meta name="dcterms.date" content="2020-12-02" />
  <meta name="description" content="Setting up a distraction-free, virtual reality programming environment using a borrowed Oculus Go" />
  <title>A Reflection on Programming in Virtual Reality</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #aaaaaa; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #c072ca; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="/style.css" type="text/css" />
</head>
<body>
<div class="menu">
<ul>
<li><a href="/">Home</a></li>
<li><a href="/about/">About</a></li>
<li><a href="/projects/">Projects</a></li>
<li><a href="/posts/">Posts</a></li>
</ul>
<hr />
</div>
<h1 id="a-reflection-on-programming-in-virtual-reality">A Reflection on Programming in Virtual Reality</h1>
<p>By <a href="https://jstrieb.github.io">Jacob Strieb</a></p>
<p>Published on <a href="/posts/vr-programming/">December 02, 2020</a></p>
<hr />
<h1 id="background">Background</h1>
<p>Since I began college, I have struggled with staying focused while working in shared spaces.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> An ADHD diagnosis during my sophomore year helped identify the root cause of my distractibility, but did little to ameliorate it. As a result, I spend a lot of time finding and testing techniques to limit distractions in my work environment. This is an especially engaging diversion when I have important work to do.</p>
<p>When my friend and housemate Logan went home for Thanksgiving, he left behind his Oculus Go—a Virtual Reality (VR) headset he bought on eBay—and gave me permission to use it in his absence. Since I had a challenging assignment for my programming language theory course due the next day,<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> it was only natural to get diverted by attempting to minimize external distractions using this new toy.</p>
<p>Given programmers’ stereotypical penchant for multi-monitor setups, I was surprised that my cursory research into VR programming environments returned no helpful results. I found a lot of vaporware claiming to “revolutionize coding” using immersive interactive experiences and three-dimensional metaphors for code, but nothing about regular programming using a headset in lieu of computer monitors.</p>
<p>What follows is a description of how I set up a distraction-free programming environment using the Oculus Go, and a review of my experience.</p>
<h1 id="technical-details">Technical Details</h1>
<p>The headset already had Mozilla’s VR web browser “Firefox Reality” installed,<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> which defaults to opening new tabs on either side of the main one, thereby allowing multiple pages to be viewed at the same time and emulating the multi-monitor setup I was after. Rather than fumbling with peripherals and installing apps on the device, I resolved to open documentation in two separate browser tabs, and stream my terminal to the third. I would type at my regular keyboard, and simply view it through the web browser on the VR headset.</p>
<p>The video below demonstrates the final setup. Note that when the headset remote turns sideways, it has been laid on the desk next to my keyboard so I can type.</p>
<figure>
<video controls>
<source src="jstrieb_vr-programming.mp4" type="video/mp4" />
</video>
<figcaption>
A video demo of working on PL theory homework in Standard ML with virtual monitors for work and documentation. The tab on the left is the assignment, the one on the right is the course textbook.
</figcaption>
</figure>
<p>There were two steps to getting fully set-up. Streaming my terminal was done using <code>ttyd</code> with a shared <code>tmux</code> session.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Reading documentation was done with <code>PDF.js</code>,<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> since Firefox Reality does not come with a built-in PDF reader.</p>
<p>Click the subsection headers below to expand for further technical details.</p>
<details>
<summary>
<h2>
Streaming the Terminal
</h2>
<p></summary></p>
<p>Setting up terminal streaming was a simple matter of downloading the correct <code>ttyd</code> release, making it executable, and running it with a <code>tmux</code> session. The following commands were run from within the terminal session I intended to stream.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Download ttyd (I use the latest x86_64 release)</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">wget</span> --output-document <span class="st">&quot;ttyd&quot;</span> <span class="st">&quot;https://github.com/tsl0922/ttyd/releases/latest/download/ttyd_linux.x86_64&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Make the downloaded file executable</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">chmod</span> +x ./ttyd</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># Start a ttyd session running in the background</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="ex">./ttyd</span> --readonly --port 6969 tmux new -A -s ttyd_tmux <span class="op">&amp;&gt;</span> /dev/null <span class="kw">&amp;</span></span></code></pre></div>
<p>The final command tells <code>ttyd</code> to run <code>tmux new -A -s ttyd_tmux</code> whenever a new user appears from the web. This connects them to a <code>tmux</code> session named <code>ttyd_tmux</code>, and creates the session before connecting if it does not already exist. Doing this ensures that the terminal viewed from the headset exactly matches the one being typed into on the computer.</p>
<p>Next, from my terminal, I ran the following command to open up the shared session. Anything typed into this session would appear on the VR headset.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">tmux</span> new -A -s ttyd_tmux</span></code></pre></div>
<p>Then, since the Oculus headset was on the same Wi-Fi network as my laptop, I ran <code>ifconfig</code> to get my local IP address, and went to the following URL inside the VR web browser to view the terminal.</p>
<pre><code>http://&lt;my local IP&gt;:6969/</code></pre>
<p>As long as the window containing the terminal was in-focus on my computer, any keys typed there appeared in the terminal being viewed in the browser.<br />
</p>
</details>
<details>
<summary>
<h2>
Viewing PDFs in Mozilla Reality
</h2>
<p></summary></p>
<p>Mozilla Reality does not come with a built-in PDF viewer, so <code>PDF.js</code> was a natural choice for rendering PDF files in the browser.</p>
<p>The <code>PDF.js</code> website provides a viewer that can render PDF files from arbitrary URLs.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> Since the PDF files are fetched client-side from within the browser, they are subject to the same-origin policy, and thus a cross-origin request sharing (CORS) proxy is necessary.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> Thus, it is possible to view PDF files by navigating to URLs like the following:</p>
<pre><code>https://mozilla.github.io/pdf.js/web/viewer.html?file=https://cors-anywhere.herokuapp.com/http://jstrieb.github.io/posts/vr-programming/assn5.pdf</code></pre>
<p>For convenience, below is a form that takes in a PDF URL and generates a shortened link to the Mozilla <code>PDF.js</code> viewer.</p>
<style>
.contact-form {
  height: auto;
}
</style>
<form class="contact-form" action="https://tinyurl.com/create.php" method="get" target="_blank">
<label for="pdf_url">Link to PDF:</label> <input id="pdf_url" type="url" /> <input type="hidden" id="source" name="source" value="indexpage"> <input type="hidden" id="url" name="url"> <button onclick="makePDFURL(this)">Get Short PDF Viewer URL</button>
</form>
<script>
function makePDFURL(form) {
  let pdf_url = document.querySelector("#pdf_url");
  let url = document.querySelector("#url");
  url.value = ("https://mozilla.github.io/pdf.js/web/viewer.html?file="
      + "https://cors-anywhere.herokuapp.com/"
      + pdf_url.value);
  return true;
}
</script>
</details>
<h1 id="reflection">Reflection</h1>
<p>Despite the difficulties and practical limitations of the headset and keyboard setup, the experience left me with the distinct impression that I had glimpsed how people will use computers in the future. Once VR technology matures, I would not be surprised if white-collar workers spend much of their time using immersive desktop environments, rather than looking at real-world screens.</p>
<p>In a world replete with distractions, deep focus is an uncommon treat. By using the VR headset, it was possible to instantly shut everything out and consistently attain this otherwise rare state of complete concentration. While wearing the headset, there were no visual distractions, and checking my phone and falling into rabbit holes on the Web were both cumbersome enough to be infrequent – the path of least resistance when working in VR was to keep hacking away at the code positioned front and center, looking away only to glance at already-open documentation pages on either side.</p>
<p>In this case, the difficulty of searching the Web and navigating to new pages was a feature, not a bug. In the course of programming outside of VR, I commonly search for something simple and realize an hour later that all I have done is read Stack Exchange “Hot Network Questions” linked on the right side of every Stack Overflow post. On the other hand, in my VR setup, the most accessible documentation is that which is readable from the terminal interface – typically, documentation already stored offline in the form of man pages or Python’s <code>help()</code> utility.</p>
<!-- TODO -->
<ul>
<li>It was really effective</li>
<li>Resolution was too low
<ul>
<li>Bearable for an hour or two of focused work</li>
<li>The battery only lasted for an hour anyway</li>
<li>This will get better in coming years; if this is taken as a given, it is possible to get ahead and be first-to-market with coding environments for VR</li>
</ul></li>
<li>Felt like the future
<ul>
<li>I can imagine being on a train or plane and working productively as if I was in “the office”</li>
</ul></li>
<li>Building VR applications on top of web standards like WebXR makes sense
<ul>
<li>Device agnostic (including non-VR devices for trying things out)</li>
<li>Future-proof?</li>
<li>Easy, no-installation setup</li>
<li>Can start today, don’t even need hardware</li>
<li>Web is the future anyway?</li>
<li>GitHub/Microsoft is already putting VS code in the browser. Adding WebXR integration probably isn’t that much of a stretch</li>
</ul></li>
<li>Would be worth setting up with the Raspberry Pi 400, which doesn’t even have a screen</li>
<li>Remote instead of the mouse is very natural</li>
<li>Doesn’t work if you can’t touch type</li>
<li>Might be a bit harder to set up on a non-Linux system</li>
<li>For some PDFs, would have to put them online on a web server or file host</li>
<li>Delay after typing exists, but isn’t too bad for me</li>
<li>Not being able to open lots of tabs (for documentation, for example) is a feature, not a bug, at least for doing homework
<ul>
<li>Could be problematic for certain types of coding, but when I look stuff up like that I usually get distracted anyway</li>
</ul></li>
<li>Having the terminal in-focus on the computer was annoying, but necessary</li>
<li>Run <code>ttyd</code> securely (with credentials) if there is concern about others viewing it, or if the device is on the open Internet. In particular, the <code>--readonly</code> flag is <em>highly</em> recommended.</li>
</ul>
<h1 id="future-work">Future Work</h1>
<p>The utterly complete focus I experienced working while immersed in virtual reality left me eager for more opportunities to work while using a VR headset. Since the initial experience in November, I have</p>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>This situation is practically unavoidable in a university setting, particularly when living with housemates during pandemic-induced remote learning conditions.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>For the curious, the assignment can be viewed <a href="assn5.pdf">here</a>. In the demo video, I implement a single rule from one part of the typechecker for modal <strong>PCF</strong> with <strong>K</strong> machines.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p><a href="https://mzl.la/reality" class="uri">https://mzl.la/reality</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p><a href="https://github.com/tsl0922/ttyd" class="uri">https://github.com/tsl0922/ttyd</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p><a href="https://mozilla.github.io/pdf.js/" class="uri">https://mozilla.github.io/pdf.js/</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p><a href="https://mozilla.github.io/pdf.js/web/viewer.html" class="uri">https://mozilla.github.io/pdf.js/web/viewer.html</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p>Incidentally, the maintainer of one of the most popular, free CORS proxies is also a primary maintainer of the <code>PDF.js</code> extension for Google Chrome <a href="https://github.com/mozilla/pdf.js/issues/1000#issuecomment-133756244" class="uri">https://github.com/mozilla/pdf.js/issues/1000#issuecomment-133756244</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<footer>
<hr />
Copyright &copy 2021 <a href="/about">Jacob Strieb</a>. All rights reserved.
</footer>
</body>
</html>
